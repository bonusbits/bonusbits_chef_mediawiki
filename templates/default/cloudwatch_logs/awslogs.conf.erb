[general]
state_file = /var/lib/awslogs/agent-state
use_gzip_http_content_encoding = true

[nginx-access]
log_group_name = <%= node['bonusbits_mediawiki_nginx']['aws']['logs_group_name'] %>
log_stream_name = <%= node['ec2']['instance_id'] %>-nginx-access
datetime = %d/%b/%Y:%H:%M:%S
file = /var/log/nginx/access.log

[nginx-errors]
log_group_name = <%= node['bonusbits_mediawiki_nginx']['aws']['logs_group_name'] %>
log_stream_name = <%= node['ec2']['instance_id'] %>-nginx-errors
datetime = %Y/%m/%d %H:%M:%S
file = /var/log/nginx/error.log

[php-fpm-errors]
log_group_name = <%= node['bonusbits_mediawiki_nginx']['aws']['logs_group_name'] %>
log_stream_name = <%= node['ec2']['instance_id'] %>-php-fpm-errors
datetime = %d-%b-%Y %H:%M:%S
file = /var/log/php-fpm/7.0/error.log

[php-fpm-www-errors]
log_group_name = <%= node['bonusbits_mediawiki_nginx']['aws']['logs_group_name'] %>
log_stream_name = <%= node['ec2']['instance_id'] %>-php-fpm-www-errors
datetime = %d-%b-%Y %H:%M:%S
file = /var/log/php-fpm/7.0/www-error.log

[mediawiki-debug]
log_group_name = <%= node['bonusbits_mediawiki_nginx']['aws']['logs_group_name'] %>
log_stream_name = <%= node['ec2']['instance_id'] %>-mediawiki-debug
file = /var/log/mediawiki/debug.log